/*
 * Swiper 3D Flow 2.1.0
 * 3D Flow plugin for Swiper
 *
 * http://www.idangero.us/sliders/swiper/plugins/3dflow.php
 *
 * Copyright 2010-2014, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under GPL & MIT
 *
 * Released on: April 18, 2014
*/
(function(e){e.prototype.plugins.tdFlow=function(e,s){"use strict";function t(){d=!0,i=e.slides;var s,t=i.length;for(s=0;t>s;s++)e.setTransition(i[s],0);if(n)for(a=e.h.getWidth(e.wrapper),o=a/i.length,s=0;t>s;s++)i[s].swiperSlideOffset=i[s].offsetLeft;else for(a=e.h.getHeight(e.wrapper),o=a/i.length,s=0;t>s;s++)i[s].swiperSlideOffset=i[s].offsetTop}function r(t){if(d){t=t||{x:0,y:0,z:0};for(var r=n?-t.x+e.width/2:-t.y+e.height/2,i=n?s.rotate:-s.rotate,a=s.depth,l=0,p=e.slides.length;p>l;l++){var h=e.slides[l].swiperSlideOffset,f=(r-h-o/2)/o*s.modifier,w=n?i*f:0,c=n?0:i*f,u=-a*Math.abs(f),g=n?0:s.stretch*f,y=n?s.stretch*f:0;.001>Math.abs(y)&&(y=0),.001>Math.abs(g)&&(g=0),.001>Math.abs(u)&&(u=0),.001>Math.abs(w)&&(w=0),.001>Math.abs(c)&&(c=0);var m="translate3d("+y+"px,"+g+"px,"+u+"px)  rotateX("+c+"deg) rotateY("+w+"deg)";if(e.setTransform(e.slides[l],m),e.slides[l].style.zIndex=-Math.abs(Math.round(f))+1,s.shadows){var T=n?e.slides[l].querySelector(".swiper-slide-shadow-left"):e.slides[l].querySelector(".swiper-slide-shadow-top"),v=n?e.slides[l].querySelector(".swiper-slide-shadow-right"):e.slides[l].querySelector(".swiper-slide-shadow-bottom");v.style.opacity=-f>0?-f:0,T.style.opacity=f>0?f:0}}if(e.browser.ie10||e.browser.ie11){var S=e.wrapper.style;S.perspectiveOrigin=r+"px 50%"}}}if(e.support.transforms3d){var i,a,o,d,n="horizontal"===e.params.mode;if(s){var l={rotate:50,stretch:0,depth:100,modifier:1,shadows:!0};s=s||{};for(var p in l)p in s||(s[p]=l[p]);return{onFirstInit:function(){if(i=e.slides,s.shadows){var a=document.createElement("div"),o=document.createElement("div");a.className=n?"swiper-slide-shadow-left":"swiper-slide-shadow-top",o.className=n?"swiper-slide-shadow-right":"swiper-slide-shadow-bottom";for(var d=0,l=i.length;l>d;d++)i[d].appendChild(a.cloneNode()),i[d].appendChild(o.cloneNode())}t(),r({x:e.getWrapperTranslate("x"),y:e.getWrapperTranslate("y"),z:e.getWrapperTranslate("z")})},onInit:function(){t(),r({x:e.getWrapperTranslate("x"),y:e.getWrapperTranslate("y"),z:e.getWrapperTranslate("z")})},onSetWrapperTransform:function(e){r(e)},onSetWrapperTransition:function(t){for(var r=0,i=e.slides.length;i>r;r++)e.setTransition(e.slides[r],t.duration),n&&s.shadows?(e.setTransition(e.slides[r].querySelector(".swiper-slide-shadow-left"),t.duration),e.setTransition(e.slides[r].querySelector(".swiper-slide-shadow-right"),t.duration)):s.shadows&&(e.setTransition(e.slides[r].querySelector(".swiper-slide-shadow-top"),t.duration),e.setTransition(e.slides[r].querySelector(".swiper-slide-shadow-bottom"),t.duration))}}}}}})(Swiper);